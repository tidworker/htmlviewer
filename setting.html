<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>設定遊戲規則</title>
    <style>
        /* 與 count / score 頁面風格一致 */
        body {
            font-family: Arial, sans-serif;
            margin: 10px;
            line-height: 1.6;
            background-color: #FFFFFF; /* 統一背景 */
            color: #333;
        }
        h1 {
            text-align: center;
            font-size: 1.8em;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 1em;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .checkbox-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 1em;
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        /* 與 count / score 頁面的按鈕樣式一致 */
        button {
            display: block;
            width: 100%;
            padding: 12px;
            font-size: 1.2em;
            font-weight: bold;
            background-color: #707070;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            opacity: 0.8; /* 與 count 頁面一致的 hover 效果 */
        }
        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }
            button {
                padding: 10px;
                font-size: 1em;
            }
            input[type="text"], input[type="number"] {
                padding: 10px;
            }
        }
    </style>
</head>
<body>

<br>

    <form id="settingsForm">
        <!-- 玩家名稱 -->
        <div class="form-group">
            <label for="player1">玩家 1 名稱</label>
            <input type="text" id="player1" placeholder="輸入玩家 1 名稱" required>
        </div>
        <div class="form-group">
            <label for="player2">玩家 2 名稱</label>
            <input type="text" id="player2" placeholder="輸入玩家 2 名稱" required>
        </div>
        <div class="form-group">
            <label for="player3">玩家 3 名稱</label>
            <input type="text" id="player3" placeholder="輸入玩家 3 名稱" required>
        </div>
        <div class="form-group">
            <label for="player4">玩家 4 名稱</label>
            <input type="text" id="player4" placeholder="輸入玩家 4 名稱" required>
        </div>

        <!-- 規則：倍率 -->
        <div class="form-group">
            <label for="multiplier">倍率</label>
            <input type="number" id="multiplier" placeholder="輸入倍率" required>
        </div>

        <!-- 規則：勾選 -->
        <div class="form-group">
            <label>勾選規則</label>
            <div class="checkbox-group">
                <label><input type="checkbox" id="rule7"> 7 張</label>
                <label><input type="checkbox" id="rule10"> 10 張</label>
                <label><input type="checkbox" id="rule13"> 13 張</label>
            </div>
        </div>

        <!-- 儲存按鈕 -->
        <button type="button" id="saveButton">儲存設定</button>
    </form>

    <script>
        // 先讀取現有的 players / settings，若有資料，就帶入表單
        const existingPlayers = JSON.parse(localStorage.getItem('players')) || {};
        const existingSettings = JSON.parse(localStorage.getItem('settings')) || {};

        // 如果已經有 players 資料，填入輸入欄
        if (existingPlayers.player1) {
            document.getElementById('player1').value = existingPlayers.player1;
        }
        if (existingPlayers.player2) {
            document.getElementById('player2').value = existingPlayers.player2;
        }
        if (existingPlayers.player3) {
            document.getElementById('player3').value = existingPlayers.player3;
        }
        if (existingPlayers.player4) {
            document.getElementById('player4').value = existingPlayers.player4;
        }

        // 如果有 settings 資料，填入倍率與規則
        if (existingSettings.multiplier) {
            document.getElementById('multiplier').value = existingSettings.multiplier;
        }
        if (existingSettings.rules) {
            document.getElementById('rule7').checked  = !!existingSettings.rules.rule7;
            document.getElementById('rule10').checked = !!existingSettings.rules.rule10;
            document.getElementById('rule13').checked = !!existingSettings.rules.rule13;
        }

        document.getElementById('saveButton').addEventListener('click', function() {
            // 收集玩家名稱
            const players = {
                player1: document.getElementById('player1').value.trim(),
                player2: document.getElementById('player2').value.trim(),
                player3: document.getElementById('player3').value.trim(),
                player4: document.getElementById('player4').value.trim()
            };

            // 收集規則
            const settings = {
                multiplier: parseFloat(document.getElementById('multiplier').value),
                rules: {
                    rule7: document.getElementById('rule7').checked,
                    rule10: document.getElementById('rule10').checked,
                    rule13: document.getElementById('rule13').checked
                }
            };

            // 儲存到 localStorage
            localStorage.setItem('players', JSON.stringify(players));
            localStorage.setItem('settings', JSON.stringify(settings));

            alert('設定已儲存！\n玩家與規則資料均已更新。');
        });
    </script>
</body>
</html>